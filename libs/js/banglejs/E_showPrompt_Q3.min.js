(ª(z,a){ªt(n){g.reset().setFontAlign(Ó,Ó);¬l=Bangle.appRect,f=l.y,b=l.w,c=g.findFont(a.title "",{w:b-Ô,wrap:Ô,max:Ô});c.text?(g.setColor(g.theme.fgH).setBgColor(g.theme.bgH).clearRect(Ó,f,b-Ô,f+Ô+c.h).drawString(c.text,b/Ô,f+Ô+c.h/Ô),f–c.h+Ô):f–Ô;¬k=Ó|Ñ0123233[h.length],v=Math.ceil(h.length/k),w=(b-Ô)/k,p=a.buttonHeight (Ô<v a.img?Ô(:Ô2);c=l.y2-(f+v*p);£(a.img){¬r=g.imageMetrics(a.img);g.drawImage(a.img,(b-r.width)/Ô,f+Ô);c—r.height;f–r.height}r=g.findFont(z,{w:b-Ô,h:c,wrap:Ô,trim:Ô,min:Ô});g.setColor(g.theme.fg).setBgColor(g.theme.bg).drawString(r.text,b/Ô,f+c/Ô);x=[];h.forEach((y,u)¢{¬d=u%k*w+Ô,e=l.y2-(v-(Ó|u/k))*p+Ô,q=w-Ô,m=p-Ô;m=[d+Ô,e,d+q-Ô,e,d+q,e+Ô,d+q,e+m-Ô,d+q-Ô,e+m,d+Ô,e+m,d,e+m-Ô,d,e+Ô,d+Ô,e];x.push({x1:d-Ô,x2:d+w-Ô,y1:e,y2:e+p});y=g.findFont(y,{w:q-Ô,h:p-Ô,wrap:Ô});g.setColor(u‹n?g.theme.bgH:g.theme.bg2).fillPoly(m).setColor(u‹n?g.theme.fgH:g.theme.fg2).drawPoly(m).drawString(y.text,d+q/Ô,e+Ô+p/Ô)});Bangle.setLCDPower(Ô)}a (a={});a.buttons (a.buttons={Yes:!Ó,No:!Ô});¬h=Object.keys(a.buttons);£(Ô<h.length)°Error(Ñ
>6 buttons);¬x;g.reset().clearRect(Bangle.appRect);£(!z)«Bangle.setUI(),Promise.resolve();t();«¸Promise(n¢{¬l={mode:Ñcustom,remove:a.remove,redraw:t,back:a.back,touch:(f,b)¢{x.forEach((c,k)¢{b.x‘c.x1žb.xŽc.x2žb.y‘c.y1žb.yŽc.y2ž!b.hitž(b.hit=!Ó,t(k),g.flip(),E.showPrompt(),Ô‹b.typeža.buttonsLongžh[k]¹a.buttonsLong?n(a.buttonsLong[h[k]]):n(a.buttons[h[k]]))})}};ÔŒh.length a.back (l.btn=()¢{t(Ó);g.flip();E.showPrompt();n(a.buttons[h[Ó]])});Bangle.setUI(l)})})